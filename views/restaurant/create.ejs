<!DOCTYPE html>
<html lang="es">
<head>
    <%- include('../partials/header') %>
    <title>QrRestaurant</title>
</head>
<body>
    <%- include('../partials/primaryMenu') %>

    <div class="container mt-5">
        <h2>Añadir nuevo restaurante</h2>
        <form action="/restaurants/store" method="post" class="mt-3 needs-validation" enctype="multipart/form-data" novalidate>
            <div>
                <input type="text" name="name" id="name" placeholder="Nombre del restaurante" class="form-control" required>
                <div class="invalid-feedback">Debes indicar el nombre de tu restaurante.</div>
                <div class="valid-feedback">¡El nombre del restaurante se ve genial!</div>
            </div>

            <div>
                <input type="number" name="capacity" id="capacity" placeholder="Aforo" class="form-control mt-3" min="1" required>
                <div class="invalid-feedback">El aforo no puede ser nulo o tomar valores negativos.</div>
                <div class="valid-feedback">Tus clientes agradecerán que hayas indicado el aforo que tienes.</div>
            </div>
            

            <div>
                <input type="text" name="address" id="address" placeholder="Dirección" class="form-control mt-3" required>
                <div class="valid-feedback">Indicar la dirección del restaurante facilitará que los clientes te encuentren.</div>
                <div class="invalid-feedback">Debes introducir la dirección de tu restaurante.</div>
            </div>

            <div>
                <input type="text" name="city" id="city" placeholder="Localidad" class="form-control mt-3" required>
                <div class="valid-feedback">La ciudad nos ayudará a mostrar a los usuarios los restaurantes que tienen cerca.</div>
                <div class="invalid-feedback">Debes introducir la localidad o ciudad donde está tu restaurante.</div>
            </div>
            
            <div>
                <input type="text" name="description" id="description" placeholder="Descripción" class="form-control mt-3" required>
                <div class="valid-feedback">¡Guau! Estás hecho todo un escritor. Tu descripción se ve perfecta.</div>
                <div class="invalid-feedback">Debes introducir una descripción para el restaurante.</div>
            </div>

            <div>
                <label for="typeOfFood" class="form-label mt-3">Tipo de comida:</label>
                <select id="typeOfFood" class="form-select" name="foodType">
                    <% foodTypes.forEach(foodType => {%>
                            <option value="<%=foodType.id%>"><%=foodType.name%></option>
                    <%}); %>
                </select>
            </div>
            
            
            <div class="mt-3">
                <label for="restaurantMenu" class="form-label">Carta</label>
                <input class="form-control" type="file" id="restaurantMenu" name="restaurantMenu" accept="application/pdf" required>
                <small>Formatos admitidos: pdf</small>
                <div class="valid-feedback">La carta ayudará a que los clientes se acaben de decidir por ir a tu restaurante.</div>
                <div class="invalid-feedback">Debes introducir la carta del restaurante en formato pdf</div>
            </div>

            <div class="mt-3">
                <label for="restaurantLogo" class="form-label">Fotos</label>
                <input class="form-control" type="file" id="restaurantLogo" name="photos" multiple  accept="image/png, image/jpeg" required>
                <small>Formatos admitidos: jpg, png</small>
                <div class="valid-feedback">Tu restaurante está muy bonito. ¡Sigue así!</div>
                <div class="invalid-feedback">Debes introducir al menos una foto en formato jpg o png</div>
            </div>

            <div class="d-grid gap-2 mb-3">
                <button class="btn btn-primary mt-5 mb-5" type="submit">Añadir restaurante</button>
            </div>
        </form>
    </div>

    
    <%- include('../partials/footer') %>
    <%- include('../partials/scripts') %>

    <script>
        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        var forms = document.querySelectorAll('.needs-validation')

        // Loop over them and prevent submission
        Array.prototype.slice.call(forms)
            .forEach(function (form) {
            form.addEventListener('submit', function (event) {
                if (!form.checkValidity()) {
                event.preventDefault()
                event.stopPropagation()
                }

                form.classList.add('was-validated')
            }, false)
            })
    </script>
</body>
</html>